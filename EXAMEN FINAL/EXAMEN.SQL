--1. CREACION TABLAS CON PK Y FK. 

--CREACION TABLAS:

create table DISTRIBUIDORAS (ID_DISTRIBUIDOR NUMBER(2) NOT NULL, 
DISTRIBUIDOR VARCHAR2(50), 
DIRECCION VARCHAR2(80),
EMAIL  VARCHAR2(50),
PAGINA_WEB VARCHAR2(100),
TELEFONO NUMBER(9),
CONTACTO VARCHAR2(15),
LOGO VARCHAR2(200));


create table PELICULAS (ID_PELICULA NUMBER(2) NOT NULL,
ID_DISTRIBUIDOR NUMBER(2) NOT NULL, 
ID_GENERO NUMBER(2) NOT NULL,
TITULO VARCHAR2(50),
ID_NACIONALIDAD NUMBER(2) NOT NULL,
ARGUMENTO VARCHAR2(300),
FOTO VARCHAR2(200),
FECHA_ESTRENO  DATE, 
ACTORES VARCHAR2(50),
DIRECTOR VARCHAR2(15),
DURACION TIMESTAMP, 
PRECIO NUMBER(2));

create table GENEROS (ID_GENERO NUMBER(2) NOT NULL,
GENERO VARCHAR2(50));

create table PEDIDOS  (ID_PEDIDO NUMBER(2) NOT NULL,
ID_CLIENTE NUMBER(2)  NOT NULL,
ID_PELICULA NUMBER(2) NOT NULL,
CANTIDAD NUMBER(2),
FECHA DATE,
PRECIO NUMBER(2));

create table NACIONALIDAD (ID_NACIONALIDAD NUMBER(2) NOT NULL, 
NACIONALIDAD VARCHAR2(15),
BANDERA VARCHAR2(200));

create table CLIENTES (ID_CLIENTE NUMBER(2)  NOT NULL,
NOMBRE VARCHAR2(25),
DIRECCION VARCHAR2(80),
EMAIL VARCHAR2(50),
CPOSTAL NUMBER(5),
PAGINA_WEB VARCHAR2(100),
IMAGEN_CLIENTE VARCHAR2(200));

DROP TABLE DISTRIBUIDORAS;
DROP TABLE PELICULAS;
DROP TABLE GENEROS;
DROP TABLE PEDIDOS;
DROP TABLE NACIONALIDAD;
DROP TABLE CLIENTES;

--PK TABLAS:

alter table PELICULAS
add constraint PK_PELICULAS
primary key(ID_PELICULA);

alter table DISTRIBUIDORAS
add constraint PK_DISTRIBUIDORAS
primary key(ID_DISTRIBUIDOR);

alter table GENEROS
add constraint PK_GENEROS
primary key(ID_GENERO);

alter table PEDIDOS
add constraint PK_PEDIDOS
primary key(ID_PEDIDO);

alter table CLIENTES
add constraint PK_CLIENTES
primary key(ID_CLIENTE);

alter table NACIONALIDAD
add constraint PK_NACIONALIDAD
primary key(ID_NACIONALIDAD);


--FK TABLAS:
ALTER TABLE PELICULAS
DROP CONSTRAINT FK_GENEROS_PELICULAS;

alter table PElICULAS 
add constraint FK_DISTRIBUIDORAS_PELICULAS
foreign key (ID_DISTRIBUIDOR)
references DISTRIBUIDORAS(ID_DISTRIBUIDOR);

alter table PElICULAS 
add constraint FK_GENEROS_PELICULAS
foreign key (ID_GENERO)
references GENEROS(ID_GENERO);

alter table PElICULAS 
add constraint FK_NACIONALIDAD_PELICULAS
foreign key (ID_NACIONALIDAD)
references NACIONALIDAD(ID_NACIONALIDAD);

alter table PEDIDOS 
add constraint FK_CLIENTES_PEDIDOS
foreign key (ID_CLIENTE)
references CLIENTES(ID_CLIENTE);

alter table PEDIDOS 
add constraint FK_PELICULAS_PEDIDOS
foreign key (ID_PELICULA)
references PELICULAS(ID_PELICULA);

--INSERTAR REGISTRO MEDIANTE INSTRUCCION SQL POR TABLA.CALCULAR_IVA
desc DISTRIBUIDORAS;

insert into DISTRIBUIDORAS (ID_DISTRIBUIDOR, DISTRIBUIDOR,
DIRECCION, EMAIL, PAGINA_WEB, TELEFONO, CONTACTO, LOGO) 
values(9,'20TH FOX','C/MIAMI 19', 
'SONNYCROKETT@CENTURY.ES', 'http://www.fox.es',
 915555555 ,'Sonny Crockett','century.jpg');

desc GENEROS;
insert into GENEROS(ID_GENERO, GENERO) values(1, 'ficcion');

desc PELICULAS;
insert into  PELICULAS(ID_PELICULA, ID_DISTRIBUIDOR, ID_GENERO,
TITULO, ID_NACIONALIDAD, ARGUMENTO, FOTO) 
values(1, 9, 4, 'cadena perpetua', 4,  'Acusado de asesianto en...',
 'image.jpg');

desc PEDIDOS;
insert into PEDIDOS( ID_PEDIDO, ID_CLIENTE, ID_PELICULA, CANTIDAD,
FECHA, PRECIO)
values (1, 2, 1,  3, '12/05/2025', 6);
desc NACIONALIDAD;
insert into NACIONALIDAD(ID_NACIONALIDAD, BANDERA) 
values(4, 'espa√±a.jpg');
desc CLIENTES;
insert into CLIENTES(ID_CLIENTE, NOMBRE, DIRECCION,
EMAIL, CPOSTAL, PAGINA_WEB, IMAGEN_CLIENTE)
values (2, 'PEDRO', 'calle x 19', 'pedro@gmail.com',28213,
'http://www.delorian.es', 'imagen.jpg');



